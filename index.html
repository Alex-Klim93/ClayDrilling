<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Производственный тест для собеседования</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1, h2 {
            color: #2c3e50;
            text-align: center;
        }
        .test-section {
            background-color: white;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .question {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .options {
            margin-left: 20px;
        }
        .correct {
            color: green;
            font-weight: bold;
        }
        button {
            display: block;
            margin: 30px auto;
            padding: 12px 25px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        #result {
            text-align: center;
            font-size: 20px;
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4fc;
            border-radius: 8px;
            display: none;
        }
        .section-title {
            background-color: #2c3e50;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-top: 40px;
        }
        #userInfo {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        #userInfo input, #userInfo select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        #testContainer {
            display: block;
        }
        #finalScreen {
            display: none;
            text-align: center;
            padding: 30px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .hidden {
            display: none;
        }
        #whatsappInfo {
            background-color: white;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <h1>Тест для собеседования в производственный цех</h1>
    <h2>Должность: Оператор станков с ЧПУ / Токарь / Слесарь</h2>

    <div id="userInfo">
        <h3>Пожалуйста, заполните ваши данные</h3>
        <input type="text" id="userName" placeholder="ФИО" required>
        <input type="tel" id="userPhone" placeholder="Номер телефона (для связи)" required>
        <select id="userPosition" required>
            <option value="">Выберите должность</option>
            <option value="Оператор станков с ЧПУ">Оператор станков с ЧПУ</option>
            <option value="Токарь">Токарь</option>
            <option value="Слесарь">Слесарь</option>
        </select>
        <button type="button" id="startTestBtn">Начать тест</button>
    </div>

    <div id="testContainer">
        <form id="testForm">
            <!-- Раздел 1: Ручной инструмент -->
            <div class="section-title">1. Ручной инструмент</div>
            <div class="test-section">
                <div class="question">
                    <p>1. Какой инструмент используется для нарезания наружной резьбы вручную?</p>
                    <div class="options">
                        <label><input type="radio" name="q1" value="a"> а) Метчик</label><br>
                        <label><input type="radio" name="q1" value="b"> б) Плашка</label><br>
                        <label><input type="radio" name="q1" value="c"> в) Зенкер</label><br>
                        <label><input type="radio" name="q1" value="d"> г) Развертка</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>2. Как называется инструмент для выколачивания штифтов и валов?</p>
                    <div class="options">
                        <label><input type="radio" name="q2" value="a"> а) Киянка</label><br>
                        <label><input type="radio" name="q2" value="b"> б) Молоток-гвоздодер</label><br>
                        <label><input type="radio" name="q2" value="c"> в) Бородок</label><br>
                        <label><input type="radio" name="q2" value="d"> г) Зубило</label>
                    </div>
                </div>

                <div class="question">
                    <p>3. Какой инструмент применяется для гибки листового металла?</p>
                    <div class="options">
                        <label><input type="radio" name="q3" value="a"> а) Тиски</label><br>
                        <label><input type="radio" name="q3" value="b"> б) Круглогубцы</label><br>
                        <label><input type="radio" name="q3" value="c"> в) Киянка</label><br>
                        <label><input type="radio" name="q3" value="d"> г) Оправка</label>
                    </div>
                </div>

                <div class="question">
                    <p>4. Как называется инструмент для удаления заусенцев?</p>
                    <div class="options">
                        <label><input type="radio" name="q4" value="a"> а) Шабер</label><br>
                        <label><input type="radio" name="q4" value="b"> б) Напильник</label><br>
                        <label><input type="radio" name="q4" value="c"> в) Надфиль</label><br>
                        <label><input type="radio" name="q4" value="d"> г) Рашпиль</label>
                    </div>
                </div>

                <div class="question">
                    <p>5. Какой инструмент используют для разметки металла?</p>
                    <div class="options">
                        <label><input type="radio" name="q5" value="a"> а) Кернер</label><br>
                        <label><input type="radio" name="q5" value="b"> б) Чертилка</label><br>
                        <label><input type="radio" name="q5" value="c"> в) Штангенциркуль</label><br>
                        <label><input type="radio" name="q5" value="d"> г) Угольник</label>
                    </div>
                </div>

                <div class="question">
                    <p>6. Какой инструмент нужен для выравнивания кромок детали?</p>
                    <div class="options">
                        <label><input type="radio" name="q6" value="a"> а) Рифлёный молоток</label><br>
                        <label><input type="radio" name="q6" value="b"> б) Киянка</label><br>
                        <label><input type="radio" name="q6" value="c"> в) Ручной рубанок</label><br>
                        <label><input type="radio" name="q6" value="d"> г) Шабровка</label>
                    </div>
                </div>

                <div class="question">
                    <p>7. Как называется инструмент для пробивания отверстий в металле?</p>
                    <div class="options">
                        <label><input type="radio" name="q7" value="a"> а) Пробойник</label><br>
                        <label><input type="radio" name="q7" value="b"> б) Зенкер</label><br>
                        <label><input type="radio" name="q7" value="c"> в) Сверло</label><br>
                        <label><input type="radio" name="q7" value="d"> г) Долото</label>
                    </div>
                </div>

                <div class="question">
                    <p>8. Какой инструмент используют для натягивания пружин?</p>
                    <div class="options">
                        <label><input type="radio" name="q8" value="a"> а) Клещи</label><br>
                        <label><input type="radio" name="q8" value="b"> б) Плоскогубцы</label><br>
                        <label><input type="radio" name="q8" value="c"> в) Специальные захваты</label><br>
                        <label><input type="radio" name="q8" value="d"> г) Разводной ключ</label>
                    </div>
                </div>

                <div class="question">
                    <p>9. Как называется инструмент для выравнивания валов?</p>
                    <div class="options">
                        <label><input type="radio" name="q9" value="a"> а) Правильная плита</label><br>
                        <label><input type="radio" name="q9" value="b"> б) Рихтовальные клещи</label><br>
                        <label><input type="radio" name="q9" value="c"> в) Притир</label><br>
                        <label><input type="radio" name="q9" value="d"> г) Шабровка</label>
                    </div>
                </div>

                <div class="question">
                    <p>10. Какой инструмент применяют для снятия фасок?</p>
                    <div class="options">
                        <label><input type="radio" name="q10" value="a"> а) Зенковка</label><br>
                        <label><input type="radio" name="q10" value="b"> б) Развертка</label><br>
                        <label><input type="radio" name="q10" value="c"> в) Шабер</label><br>
                        <label><input type="radio" name="q10" value="d"> г) Напильник</label>
                    </div>
                </div>
            </div>

            <!-- Раздел 2: Измерительный инструмент -->
            <div class="section-title">2. Измерительный инструмент</div>
            <div class="test-section">
                <div class="question">
                    <p>1. Какой инструмент измеряет глубину паза?</p>
                    <div class="options">
                        <label><input type="radio" name="q11" value="a"> а) Штангенглубиномер</label><br>
                        <label><input type="radio" name="q11" value="b"> б) Микрометр</label><br>
                        <label><input type="radio" name="q11" value="c"> в) Нутромер</label><br>
                        <label><input type="radio" name="q11" value="d"> г) Индикатор</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>2. Какой прибор измеряет отклонение от плоскостности?</p>
                    <div class="options">
                        <label><input type="radio" name="q12" value="a"> а) Щуп</label><br>
                        <label><input type="radio" name="q12" value="b"> б) Линейка-поверочная</label><br>
                        <label><input type="radio" name="q12" value="c"> в) Уровень</label><br>
                        <label><input type="radio" name="q12" value="d"> г) Индикатор</label>
                    </div>
                </div>

                <div class="question">
                    <p>3. Какой инструмент измеряет шаг резьбы?</p>
                    <div class="options">
                        <label><input type="radio" name="q13" value="a"> а) Резьбомер</label><br>
                        <label><input type="radio" name="q13" value="b"> б) Штангенциркуль</label><br>
                        <label><input type="radio" name="q13" value="c"> в) Микрометр</label><br>
                        <label><input type="radio" name="q13" value="d"> г) Угломер</label>
                    </div>
                </div>

                <div class="question">
                    <p>4. Как называется прибор для измерения углов?</p>
                    <div class="options">
                        <label><input type="radio" name="q14" value="a"> а) Угольник</label><br>
                        <label><input type="radio" name="q14" value="b"> б) Транспортир</label><br>
                        <label><input type="radio" name="q14" value="c"> в) Угломер</label><br>
                        <label><input type="radio" name="q14" value="d"> г) Нивелир</label>
                    </div>
                </div>

                <div class="question">
                    <p>5. Какой инструмент измеряет биение вала?</p>
                    <div class="options">
                        <label><input type="radio" name="q15" value="a"> а) Индикатор часового типа</label><br>
                        <label><input type="radio" name="q15" value="b"> б) Штангенциркуль</label><br>
                        <label><input type="radio" name="q15" value="c"> в) Микрометр</label><br>
                        <label><input type="radio" name="q15" value="d"> г) Нутромер</label>
                    </div>
                </div>

                <div class="question">
                    <p>6. Какой инструмент используют для проверки прямого угла?</p>
                    <div class="options">
                        <label><input type="radio" name="q16" value="a"> а) Угольник</label><br>
                        <label><input type="radio" name="q16" value="b"> б) Уровень</label><br>
                        <label><input type="radio" name="q16" value="c"> в) Линейка</label><br>
                        <label><input type="radio" name="q16" value="d"> г) Щуп</label>
                    </div>
                </div>

                <div class="question">
                    <p>7. Какой прибор измеряет зазор между деталями?</p>
                    <div class="options">
                        <label><input type="radio" name="q17" value="a"> а) Щуп</label><br>
                        <label><input type="radio" name="q17" value="b"> б) Микрометр</label><br>
                        <label><input type="radio" name="q17" value="c"> в) Штангенциркуль</label><br>
                        <label><input type="radio" name="q17" value="d"> г) Нутромер</label>
                    </div>
                </div>

                <div class="question">
                    <p>8. Какой инструмент измеряет наружный диаметр с высокой точностью?</p>
                    <div class="options">
                        <label><input type="radio" name="q18" value="a"> а) Штангенциркуль</label><br>
                        <label><input type="radio" name="q18" value="b"> б) Микрометр</label><br>
                        <label><input type="radio" name="q18" value="c"> в) Нутромер</label><br>
                        <label><input type="radio" name="q18" value="d"> г) Резьбомер</label>
                    </div>
                </div>

                <div class="question">
                    <p>9. Как называется прибор для проверки соосности?</p>
                    <div class="options">
                        <label><input type="radio" name="q19" value="a"> а) Индикаторная стойка</label><br>
                        <label><input type="radio" name="q19" value="b"> б) Уровень</label><br>
                        <label><input type="radio" name="q19" value="c"> в) Теодолит</label><br>
                        <label><input type="radio" name="q19" value="d"> г) Нивелир</label>
                    </div>
                </div>

                <div class="question">
                    <p>10. Какой инструмент измеряет шероховатость поверхности?</p>
                    <div class="options">
                        <label><input type="radio" name="q20" value="a"> а) Профилометр</label><br>
                        <label><input type="radio" name="q20" value="b"> б) Микрометр</label><br>
                        <label><input type="radio" name="q20" value="c"> в) Щуп</label><br>
                        <label><input type="radio" name="q20" value="d"> г) Индикатор</label>
                    </div>
                </div>
            </div>

            <!-- Раздел 3: Режущий инструмент -->
            <div class="section-title">3. Режущий инструмент</div>
            <div class="test-section">
                <div class="question">
                    <p>1. Какой резец используется для чернового точения?</p>
                    <div class="options">
                        <label><input type="radio" name="q21" value="a"> а) Проходной отогнутый</label><br>
                        <label><input type="radio" name="q21" value="b"> б) Расточной</label><br>
                        <label><input type="radio" name="q21" value="c"> в) Подрезной</label><br>
                        <label><input type="radio" name="q21" value="d"> г) Резьбовой</label>
                    </div>
                </div>
                
                <div class="question">
                    <p>2. Какой угол у сверла по металлу стандартного типа?</p>
                    <div class="options">
                        <label><input type="radio" name="q22" value="a"> а) 90°</label><br>
                        <label><input type="radio" name="q22" value="b"> б) 118°</label><br>
                        <label><input type="radio" name="q22" value="c"> в) 135°</label><br>
                        <label><input type="radio" name="q22" value="d"> г) 60°</label>
                    </div>
                </div>

                <div class="question">
                    <p>3. Как называется режущая часть фрезы?</p>
                    <div class="options">
                        <label><input type="radio" name="q23" value="a"> а) Хвостовик</label><br>
                        <label><input type="radio" name="q23" value="b"> б) Зуб</label><br>
                        <label><input type="radio" name="q23" value="c"> в) Лезвие</label><br>
                        <label><input type="radio" name="q23" value="d"> г) Кромка</label>
                    </div>
                </div>

                <div class="question">
                    <p>4. Какой инструмент используют для чистовой обработки отверстий?</p>
                    <div class="options">
                        <label><input type="radio" name="q24" value="a"> а) Зенкер</label><br>
                        <label><input type="radio" name="q24" value="b"> б) Развертка</label><br>
                        <label><input type="radio" name="q24" value="c"> в) Метчик</label><br>
                        <label><input type="radio" name="q24" value="d"> г) Сверло</label>
                    </div>
                </div>

                <div class="question">
                    <p>5. Какой материал чаще всего используют для изготовления твердосплавных пластин?</p>
                    <div class="options">
                        <label><input type="radio" name="q25" value="a"> а) Быстрорежущая сталь</label><br>
                        <label><input type="radio" name="q25" value="b"> б) ВК8</label><br>
                        <label><input type="radio" name="q25" value="c"> в) P6M5</label><br>
                        <label><input type="radio" name="q25" value="d"> г) У8А</label>
                    </div>
                </div>

                <div class="question">
                    <p>6. Как называется угол между передней поверхностью резца и плоскостью резания?</p>
                    <div class="options">
                        <label><input type="radio" name="q26" value="a"> а) Главный угол</label><br>
                        <label><input type="radio" name="q26" value="b"> б) Передний угол</label><br>
                        <label><input type="radio" name="q26" value="c"> в) Угол заострения</label><br>
                        <label><input type="radio" name="q26" value="d"> г) Угол наклона</label>
                    </div>
                </div>

                <div class="question">
                    <p>7. Какой инструмент используют для нарезания внутренней резьбы?</p>
                    <div class="options">
                        <label><input type="radio" name="q27" value="a"> а) Плашка</label><br>
                        <label><input type="radio" name="q27" value="b"> б) Метчик</label><br>
                        <label><input type="radio" name="q27" value="c"> в) Зенкер</label><br>
                        <label><input type="radio" name="q27" value="d"> г) Развертка</label>
                    </div>
                </div>

                <div class="question">
                    <p>8. Как называется процесс заточки резца для восстановления режущих кромок?</p>
                    <div class="options">
                        <label><input type="radio" name="q28" value="a"> а) Правка</label><br>
                        <label><input type="radio" name="q28" value="b"> б) Закалка</label><br>
                        <label><input type="radio" name="q28" value="c"> в) Переточка</label><br>
                        <label><input type="radio" name="q28" value="d"> г) Отпуск</label>
                    </div>
                </div>

                <div class="question">
                    <p>9. Какой параметр определяет стойкость инструмента?</p>
                    <div class="options">
                        <label><input type="radio" name="q29" value="a"> а) Твердость</label><br>
                        <label><input type="radio" name="q29" value="b"> б) Время работы до затупления</label><br>
                        <label><input type="radio" name="q29" value="c"> в) Угол заточки</label><br>
                        <label><input type="radio" name="q29" value="d"> г) Скорость резания</label>
                    </div>
                </div>

                <div class="question">
                    <p>10. Как называется инструмент для обработки торцов?</p>
                    <div class="options">
                        <label><input type="radio" name="q30" value="a"> а) Проходной резец</label><br>
                        <label><input type="radio" name="q30" value="b"> б) Подрезной резец</label><br>
                        <label><input type="radio" name="q30" value="c"> в) Расточной резец</label><br>
                        <label><input type="radio" name="q30" value="d"> г) Резьбовой резец</label>
                    </div>
                </div>
            </div>

            <!-- Кнопка отправки -->
            <button type="button" id="submitBtn">Проверить результаты</button>
        </form>

        <div id="result"></div>
    </div>

    <div id="finalScreen">
        <h2>Тест завершен!</h2>
        <p id="finalMessage"></p>
        <p>Результаты теста были отправлены руководителю.</p>
    </div>

    <div id="whatsappInfo" class="hidden">
        <h3>Отправка результатов в WhatsApp</h3>
        <p>Введите номер телефона руководителя (в международном формате, например: 79001234567)</p>
        <input type="tel" id="managerPhone" placeholder="Номер телефона руководителя" required>
        <button type="button" id="sendWhatsAppBtn">Отправить в WhatsApp</button>
    </div>

    <script>
        // Скрываем тест при загрузке
        document.getElementById('testContainer').style.display = 'none';
        document.getElementById('finalScreen').style.display = 'none';

        // Обработчик начала теста
        document.getElementById('startTestBtn').addEventListener('click', function() {
            const userName = document.getElementById('userName').value;
            const userPhone = document.getElementById('userPhone').value;
            const userPosition = document.getElementById('userPosition').value;

            if (!userName || !userPhone || !userPosition) {
                alert('Пожалуйста, заполните все поля!');
                return;
            }

            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('testContainer').style.display = 'block';
        });

        // Правильные ответы
        const correctAnswers = {
            q1: "b", q2: "c", q3: "b", q4: "b", q5: "b", q6: "a", q7: "a", q8: "c", q9: "a", q10: "a",
            q11: "a", q12: "b", q13: "a", q14: "c", q15: "a", q16: "a", q17: "a", q18: "b", q19: "a", q20: "a",
            q21: "a", q22: "b", q23: "b", q24: "b", q25: "b", q26: "b", q27: "b", q28: "c", q29: "b", q30: "b"
        };

        // Тексты вопросов и вариантов ответов
        const questionTexts = {
            q1: "1. Какой инструмент используется для нарезания наружной резьбы вручную?",
            q2: "2. Как называется инструмент для выколачивания штифтов и валов?",
            q3: "3. Какой инструмент применяется для гибки листового металла?",
            q4: "4. Как называется инструмент для удаления заусенцев?",
            q5: "5. Какой инструмент используют для разметки металла?",
            q6: "6. Какой инструмент нужен для выравнивания кромок детали?",
            q7: "7. Как называется инструмент для пробивания отверстий в металле?",
            q8: "8. Какой инструмент используют для натягивания пружин?",
            q9: "9. Как называется инструмент для выравнивания валов?",
            q10: "10. Какой инструмент применяют для снятия фасок?",
            q11: "1. Какой инструмент измеряет глубину паза?",
            q12: "2. Какой прибор измеряет отклонение от плоскостности?",
            q13: "3. Какой инструмент измеряет шаг резьбы?",
            q14: "4. Как называется прибор для измерения углов?",
            q15: "5. Какой инструмент измеряет биение вала?",
            q16: "6. Какой инструмент используют для проверки прямого угла?",
            q17: "7. Какой прибор измеряет зазор между деталями?",
            q18: "8. Какой инструмент измеряет наружный диаметр с высокой точностью?",
            q19: "9. Как называется прибор для проверки соосности?",
            q20: "10. Какой инструмент измеряет шероховатость поверхности?",
            q21: "1. Какой резец используется для чернового точения?",
            q22: "2. Какой угол у сверла по металлу стандартного типа?",
            q23: "3. Как называется режущая часть фрезы?",
            q24: "4. Какой инструмент используют для чистовой обработки отверстий?",
            q25: "5. Какой материал чаще всего используют для изготовления твердосплавных пластин?",
            q26: "6. Как называется угол между передней поверхностью резца и плоскостью резания?",
            q27: "7. Какой инструмент используют для нарезания внутренней резьбы?",
            q28: "8. Как называется процесс заточки резца для восстановления режущих кромок?",
            q29: "9. Какой параметр определяет стойкость инструмента?",
            q30: "10. Как называется инструмент для обработки торцов?"
        };

        const optionTexts = {
            q1: { a: "а) Метчик", b: "б) Плашка", c: "в) Зенкер", d: "г) Развертка" },
            q2: { a: "а) Киянка", b: "б) Молоток-гвоздодер", c: "в) Бородок", d: "г) Зубило" },
            q3: { a: "а) Тиски", b: "б) Круглогубцы", c: "в) Киянка", d: "г) Оправка" },
            q4: { a: "а) Шабер", b: "б) Напильник", c: "в) Надфиль", d: "г) Рашпиль" },
            q5: { a: "а) Кернер", b: "б) Чертилка", c: "в) Штангенциркуль", d: "г) Угольник" },
            q6: { a: "а) Рифлёный молоток", b: "б) Киянка", c: "в) Ручной рубанок", d: "г) Шабровка" },
            q7: { a: "а) Пробойник", b: "б) Зенкер", c: "в) Сверло", d: "г) Долото" },
            q8: { a: "а) Клещи", b: "б) Плоскогубцы", c: "в) Специальные захваты", d: "г) Разводной ключ" },
            q9: { a: "а) Правильная плита", b: "б) Рихтовальные клещи", c: "в) Притир", d: "г) Шабровка" },
            q10: { a: "а) Зенковка", b: "б) Развертка", c: "в) Шабер", d: "г) Напильник" },
            q11: { a: "а) Штангенглубиномер", b: "б) Микрометр", c: "в) Нутромер", d: "г) Индикатор" },
            q12: { a: "а) Щуп", b: "б) Линейка-поверочная", c: "в) Уровень", d: "г) Индикатор" },
            q13: { a: "а) Резьбомер", b: "б) Штангенциркуль", c: "в) Микрометр", d: "г) Угломер" },
            q14: { a: "а) Угольник", b: "б) Транспортир", c: "в) Угломер", d: "г) Нивелир" },
            q15: { a: "а) Индикатор часового типа", b: "б) Штангенциркуль", c: "в) Микрометр", d: "г) Нутромер" },
            q16: { a: "а) Угольник", b: "б) Уровень", c: "в) Линейка", d: "г) Щуп" },
            q17: { a: "а) Щуп", b: "б) Микрометр", c: "в) Штангенциркуль", d: "г) Нутромер" },
            q18: { a: "а) Штангенциркуль", b: "б) Микрометр", c: "в) Нутромер", d: "г) Резьбомер" },
            q19: { a: "а) Индикаторная стойка", b: "б) Уровень", c: "в) Теодолит", d: "г) Нивелир" },
            q20: { a: "а) Профилометр", b: "б) Микрометр", c: "в) Щуп", d: "г) Индикатор" },
            q21: { a: "а) Проходной отогнутый", b: "б) Расточной", c: "в) Подрезной", d: "г) Резьбовой" },
            q22: { a: "а) 90°", b: "б) 118°", c: "в) 135°", d: "г) 60°" },
            q23: { a: "а) Хвостовик", b: "б) Зуб", c: "в) Лезвие", d: "г) Кромка" },
            q24: { a: "а) Зенкер", b: "б) Развертка", c: "в) Метчик", d: "г) Сверло" },
            q25: { a: "а) Быстрорежущая сталь", b: "б) ВК8", c: "в) P6M5", d: "г) У8А" },
            q26: { a: "а) Главный угол", b: "б) Передний угол", c: "в) Угол заострения", d: "г) Угол наклона" },
            q27: { a: "а) Плашка", b: "б) Метчик", c: "в) Зенкер", d: "г) Развертка" },
            q28: { a: "а) Правка", b: "б) Закалка", c: "в) Переточка", d: "г) Отпуск" },
            q29: { a: "а) Твердость", b: "б) Время работы до затупления", c: "в) Угол заточки", d: "г) Скорость резания" },
            q30: { a: "а) Проходной резец", b: "б) Подрезной резец", c: "в) Расточной резец", d: "г) Резьбовой резец" }
        };

        // Обработчик отправки теста
        document.getElementById('submitBtn').addEventListener('click', function() {
            const userName = document.getElementById('userName').value;
            const userPhone = document.getElementById('userPhone').value;
            const userPosition = document.getElementById('userPosition').value;

            let score = 0;
            const totalQuestions = Object.keys(correctAnswers).length;
            const userAnswers = {};
            
            // Проверка ответов и сбор данных
            for (let i = 1; i <= totalQuestions; i++) {
                const questionName = "q" + i;
                const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);
                
                if (selectedOption) {
                    userAnswers[questionName] = selectedOption.value;
                    if (selectedOption.value === correctAnswers[questionName]) {
                        score++;
                    }
                } else {
                    userAnswers[questionName] = "Нет ответа";
                }
            }

            // Вычисление результата
            const percentage = Math.round((score / totalQuestions) * 100);
            let message = `Вы ответили правильно на ${score} из ${totalQuestions} вопросов (${percentage}%). `;
            
            if (percentage >= 80) {
                message += "Отличный результат! Вы хорошо подготовлены к работе.";
            } else if (percentage >= 50) {
                message += "Средний результат. Требуется дополнительное обучение.";
            } else {
                message += "Низкий результат. Необходима серьезная подготовка.";
            }
            
            // Отображение результата
            document.getElementById('result').style.display = 'block';
            document.getElementById('result').innerHTML = message;

            // Подготовка данных для отправки
            const testData = {
                userName: userName,
                userPhone: userPhone,
                userPosition: userPosition,
                score: score,
                totalQuestions: totalQuestions,
                percentage: percentage,
                answers: userAnswers,
                correctAnswers: correctAnswers,
                questionTexts: questionTexts,
                optionTexts: optionTexts,
                timestamp: new Date().toISOString()
            };

            // Показываем форму для отправки в WhatsApp
            document.getElementById('testContainer').style.display = 'none';
            document.getElementById('whatsappInfo').classList.remove('hidden');
            
            // Сохраняем данные теста для отправки
            window.testData = testData;
        });

        // Обработчик отправки в WhatsApp
        document.getElementById('sendWhatsAppBtn').addEventListener('click', function() {
            const managerPhone = document.getElementById('managerPhone').value;
            if (!managerPhone) {
                alert('Пожалуйста, введите номер телефона руководителя');
                return;
            }

            const testData = window.testData;
            
            // Формируем сообщение для WhatsApp
            let whatsappMessage = `*Результаты тестирования кандидата*\n\n`;
            whatsappMessage += `*Кандидат:* ${testData.userName}\n`;
            whatsappMessage += `*Телефон:* ${testData.userPhone}\n`;
            whatsappMessage += `*Должность:* ${testData.userPosition}\n`;
            whatsappMessage += `*Результат:* ${testData.score}/${testData.totalQuestions} (${testData.percentage}%)\n\n`;
            whatsappMessage += `*Подробные ответы:*\n\n`;

            // Добавляем ответы по каждому вопросу
            for (let i = 1; i <= testData.totalQuestions; i++) {
                const q = 'q' + i;
                const questionText = testData.questionTexts[q];
                const userAnswer = testData.answers[q];
                const correctAnswer = testData.correctAnswers[q];
                
                whatsappMessage += `${questionText}\n`;
                whatsappMessage += `- Ответ кандидата: ${testData.optionTexts[q][userAnswer] || 'Нет ответа'}\n`;
                whatsappMessage += `- Правильный ответ: ${testData.optionTexts[q][correctAnswer]}\n`;
                
                if (userAnswer === correctAnswer) {
                    whatsappMessage += `✅ Верно\n\n`;
                } else {
                    whatsappMessage += `❌ Неверно\n\n`;
                }
            }

            // Кодируем сообщение для URL
            const encodedMessage = encodeURIComponent(whatsappMessage);
            
            // Формируем ссылку WhatsApp
            const whatsappUrl = `https://wa.me/${managerPhone}?text=${encodedMessage}`;
            
            // Открываем WhatsApp в новом окне
            window.open(whatsappUrl, '_blank');
            
            // Показываем финальный экран
            document.getElementById('whatsappInfo').classList.add('hidden');
            document.getElementById('finalScreen').style.display = 'block';
            document.getElementById('finalMessage').textContent = `Вы ответили правильно на ${testData.score} из ${testData.totalQuestions} вопросов (${testData.percentage}%).`;
        });
    </script>
</body>
</html>
